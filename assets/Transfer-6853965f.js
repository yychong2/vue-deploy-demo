import{_ as y,d as i,u as V,C as b,H as k,r as c,o as l,c as u,a as d,b as r,w as p,F as _,f as L,g as T,l as A,t as M}from"./index-d8fd8061.js";let h={"X-Member-Details":i.defaults.headers.common["X-Member-Details"]};const x={data(){return{title:"",description:"",productFrom:"",productTo:"",productList:[],productListTo:[],transferAmount:"",productPromotionList:[],product_promotion_selected:"",promotionResult:!1}},created(){const{t:e}=V();this.title=e("title.transfer"),this.description=e("title.transfer_description"),i.defaults.headers.common["X-Member-Details"]=b.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(b.enc.Utf8),this.GetProductWalletFrom()},methods:{GetProductWalletFrom(){i.get("GetProductWalletDetails",{},{headers:h}).then(e=>{if(e.data.ResponseCode=="0")for(let t=0;t<e.data.ProductList.length;t++)(e.data.ProductList[t].IsMaintenance==!1||e.data.ProductList[t].IsDrop==!1)&&this.getProductBalance(e.data.ProductList[t].ProductCode,e.data.ProductList[t].IsSeamless,e.data.ProductList[t].IsMaintenance).then(a=>{this.productList.push({name:e.data.ProductList[t].ProductName+" - "+a,code:e.data.ProductList[t].ProductCode,id:e.data.ProductList[t].Id})})}).catch(e=>{console.error(e)})},onChange(e){this.productListTo=[];for(let t=0;t<this.productList.length;t++)e!=this.productList[t].code&&this.productListTo.push({name:this.productList[t].name,code:this.productList[t].code,id:this.productList[t].id});this.productTo=""},submitTransfer(e){if(this.productFrom==""||this.productTo=="")return alert("bank selected is required");i.post("Transfer",{TransferFrom:this.productFrom,TransferTo:this.productTo,TransferAmount:e.transferAmount,ProductPromotionId:this.product_promotion_selected},{headers:h}).then(t=>{t.data.ResponseCode=="0"&&alert(t.data.ResponseMessage)}).catch(t=>{console.error(t)})},async getProductBalance(e,t,s){const a=await i.post("GetBalance?productCode="+e+"&isSeamless="+t+"&isMaintenance="+s,{},{headers:h});return a.data=="9999"||a.data=="null"?"Maintanence":a.data},checkPromotion(e){const t=[];this.productListTo.forEach(s=>{s.code===e&&t.push(s)}),i.post("GetProductPromoList",{ProductId:t[0].id,ProductCode:t[0].code,IsLaunchGame:!0},{headers:h}).then(s=>{s.data.ResponseCode=="0"&&(this.productPromotionList=[],s.data.ProductPromotionList.length>0?(this.productPromotionList.push({Title:"Please select",Id:""}),s.data.ProductPromotionList.forEach(a=>{this.productPromotionList.push({Title:a.Title,Id:a.Id})}),this.product_promotion_selected="",this.promotionResult=!0):this.promotionResult=!1)}).catch(s=>{console.error(s)})},validateTransferAmount(e){return e?!0:"This field is required"}},components:{Header:k}},S={class:"form-01-main"},R={class:"form-cover"},B={class:"container"},D={class:"form-sub-main"},E={class:"form-group"},G=r("span",null,"Transfer From",-1),H={class:"form-group"},N=r("span",null,"Transfer To",-1),U={key:0},q={class:"form-group"},w=r("span",null,"Product Promotion",-1),W={class:"form-group"},X=r("span",null,"Transfer Amount",-1),j={class:"form-group"},J={class:"btn_uy"};function K(e,t,s,a,n,m){const v=c("Header"),f=c("el-option"),P=c("el-select"),C=c("Field"),F=c("ErrorMessage"),I=c("Form");return l(),u(_,null,[d(v,{title:n.title,description:n.description},null,8,["title","description"]),r("section",S,[r("div",R,[r("div",B,[d(I,{onSubmit:m.submitTransfer},{default:p(()=>[r("div",D,[r("div",E,[G,d(P,{class:"form-control2 _ge_de_ol",modelValue:n.productFrom,"onUpdate:modelValue":t[0]||(t[0]=o=>n.productFrom=o),onChange:m.onChange,clearable:"",placeholder:"Please select"},{default:p(()=>[(l(!0),u(_,null,L(n.productList,(o,g)=>(l(),T(f,{label:o.name,key:o.code,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),r("div",H,[N,d(P,{class:"form-control2 _ge_de_ol",clearable:"",filterable:"",modelValue:n.productTo,"onUpdate:modelValue":t[1]||(t[1]=o=>n.productTo=o),onChange:m.checkPromotion,placeholder:"Please select"},{default:p(()=>[(l(!0),u(_,null,L(n.productListTo,(o,g)=>(l(),T(f,{label:o.name,key:o.code,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),n.promotionResult?(l(),u("div",U,[r("div",q,[w,d(P,{class:"form-control2 _ge_de_ol",modelValue:n.product_promotion_selected,"onUpdate:modelValue":t[2]||(t[2]=o=>n.product_promotion_selected=o),placeholder:"Please select","aria-required":"true"},{default:p(()=>[(l(!0),u(_,null,L(n.productPromotionList,(o,g)=>(l(),T(f,{label:o.Title,key:o.Id,value:o.Id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):A("",!0),r("div",W,[X,d(C,{class:"form-control2 _ge_de_ol",name:"transferAmount",type:"text",placeholder:"Enter Transfer Amount",rules:m.validateTransferAmount,autocomplete:"off"},null,8,["rules"]),d(F,{name:"transferAmount",style:{color:"red"}})]),r("div",j,[r("div",J,[r("button",null,M(e.$t("common.submit")),1)])])])]),_:1},8,["onSubmit"])])])])],64)}const O=y(x,[["render",K]]);export{O as default};

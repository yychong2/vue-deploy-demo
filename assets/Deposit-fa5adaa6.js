import{_ as D,d as c,C as L,L as x,r as a,o as d,c as n,a as i,b as s,t as k,w as u,F as m,f as h,g as f}from"./index-2f775f96.js";const B={data(){return{promotionResult:!1,operatorBankAccountList:{},productList:[],promotionList:[],productPromotionList:[],bank_selected:"",product_selected:"",promotion_selected:"",product_promotion_selected:"",loading:!1,headers:{"X-Member-Details":c.defaults.headers.common["X-Member-Details"]}}},created(){c.defaults.headers.common["X-Member-Details"]=L.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(L.enc.Utf8),this.GetDepositDetails()},methods:{GetDepositDetails:function(r){c.get("GetDepositDetails",{},this.headers).then(o=>{o.data.ResponseCode=="0"&&(this.operatorBankAccountList=o.data.OperatorBankAccountList,o.data.ProductList.length>0&&(this.productList.push({ProductName:"Please select",Id:"",ProductCode:""}),o.data.ProductList.forEach(t=>{this.productList.push({ProductName:t.ProductName,ProductCode:t.Id,Id:t.Id})})),o.data.PromotionList.length>0&&(this.promotionList.push({Title:"Please select",Id:""}),o.data.PromotionList.forEach(t=>{this.promotionList.push({Title:t.Title,Id:t.Id})})))}).catch(o=>{console.error(o)})},onSubmit(r){const o=this.product_selected;this.loading=!0,c.post("Deposit",{DepositBankId:this.bank_selected,DepositBankCode:"",DepositAmount:r.amount_deposit,ProductId:this.product_selected,ProductCode:o,ProductPromotionId:this.product_promotion_selected,PromotionId:this.promotion_selected,PromotionCode:""},this.headers).then(t=>{t.data.ResponseCode=="0"&&alert(t.data.ResponseMessage)}).catch(t=>{console.error(t)}).finally(t=>{this.loading=!1})},onChange(r){const o=[];this.productList.forEach(t=>{t.ProductCode===r&&o.push(t)}),c.post("GetProductPromoList",{ProductId:o[0].Id,ProductCode:o[0].ProductCode,IsLaunchGame:!0},this.headers).then(t=>{t.data.ResponseCode=="0"&&(this.productPromotionList=[],t.data.ProductPromotionList.length>0?(this.productPromotionList.push({Title:"Please select",Id:""}),t.data.ProductPromotionList.forEach(g=>{this.productPromotionList.push({Title:g.Title,Id:g.Id})}),this.promotion_selected="",this.promotionResult=!0):(this.product_promotion_selected="",this.promotionResult=!1))}).catch(t=>{console.error(t)})},validateDepositAmount(r){return r?!0:"This field is required"}},components:{Loading:x}},V={class:"py-5"},A={class:"container px-5"},E={class:"bg-light rounded-3 py-5 px-4 px-md-5 mb-5"},N={class:"text-center mb-5"},S=s("div",{class:"feature bg-dark bg-gradient text-white rounded-3 mb-3"},[s("i",{class:"bi bi-cash"})],-1),T={class:"fw-bolder"},R={class:"row gx-5 justify-content-center"},F={class:"col-lg-8 col-xl-6"},M={class:"form-floating mb-3"},q={class:"form-group"},w=s("span",{style:{color:"black"}},"Bank Name",-1),G={class:"form-floating mb-3"},U={class:"form-group"},X=s("span",{style:{color:"black"}},"Product Name",-1),j={key:0,class:"form-floating mb-3"},J={class:"form-group"},K=s("span",{style:{color:"black"}},"Product Promotion",-1),O={key:1,class:"form-floating mb-3"},z={class:"form-group"},H=s("span",{style:{color:"black"}},"Promotion",-1),Q={class:"form-floating mb-3"},W={class:"d-grid"},Y={class:"btn btn-dark btn-lg",id:"submitButton"};function Z(r,o,t,g,l,b){const v=a("Loading"),_=a("el-option"),p=a("el-select"),I=a("Field"),y=a("ErrorMessage"),C=a("Form");return d(),n(m,null,[i(v,{loading:l.loading},null,8,["loading"]),s("section",V,[s("div",A,[s("div",E,[s("div",N,[S,s("h1",T,k(r.$t("title.deposit")),1)]),s("div",R,[s("div",F,[i(C,{onSubmit:b.onSubmit},{default:u(()=>[s("div",M,[s("div",q,[w,i(p,{class:"form-control2 _ge_de_ol",modelValue:l.bank_selected,"onUpdate:modelValue":o[0]||(o[0]=e=>l.bank_selected=e),placeholder:"Please select","aria-required":"true"},{default:u(()=>[(d(!0),n(m,null,h(l.operatorBankAccountList,(e,P)=>(d(),f(_,{label:e.BankName,key:e.BankId,value:e.BankId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),s("div",G,[s("div",U,[X,i(p,{class:"form-control2 _ge_de_ol",modelValue:l.product_selected,"onUpdate:modelValue":o[1]||(o[1]=e=>l.product_selected=e),onChange:b.onChange,placeholder:"Please select","aria-required":"true"},{default:u(()=>[(d(!0),n(m,null,h(l.productList,(e,P)=>(d(),f(_,{label:e.ProductName,key:e.ProductCode,value:e.ProductCode},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),l.promotionResult?(d(),n("div",j,[s("div",J,[K,i(p,{class:"form-control2 _ge_de_ol",modelValue:l.product_promotion_selected,"onUpdate:modelValue":o[2]||(o[2]=e=>l.product_promotion_selected=e),placeholder:"Please select","aria-required":"true"},{default:u(()=>[(d(!0),n(m,null,h(l.productPromotionList,(e,P)=>(d(),f(_,{label:e.Title,key:e.Id,value:e.Id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):(d(),n("div",O,[s("div",z,[H,i(p,{class:"form-control2 _ge_de_ol",modelValue:l.promotion_selected,"onUpdate:modelValue":o[3]||(o[3]=e=>l.promotion_selected=e),placeholder:"Please select","aria-required":"true"},{default:u(()=>[(d(!0),n(m,null,h(l.promotionList,(e,P)=>(d(),f(_,{label:e.Title,key:e.Id,value:e.Id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])),s("div",Q,[i(I,{class:"form-control2 _ge_de_ol",name:"amount_deposit",style:{color:"black"},type:"text",inputmode:"numeric",pattern:"/d+",placeholder:"Enter Deposit Amount",rules:b.validateDepositAmount,autocomplete:"off"},null,8,["rules"]),i(y,{name:"amount_deposit",style:{color:"red"}})]),s("div",W,[s("button",Y,k(r.$t("common.submit")),1)])]),_:1},8,["onSubmit"])])])])])])],64)}const oo=D(B,[["render",Z]]);export{oo as default};

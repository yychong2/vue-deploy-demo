import{_ as M,d,u as A,C as b,H as S,r as n,o as c,c as m,a as l,b as s,w as p,F as f,g as T,h as L,t as V}from"./index-c90b3eca.js";let _={"X-Member-Details":d.defaults.headers.common["X-Member-Details"]};const x={data(){return{title:"",description:"",productFrom:"",productTo:"",productList:[],productListTo:[],transferAmount:""}},created(){const{t:e}=A();this.title=e("title.transfer"),this.description=e("title.transfer_description"),d.defaults.headers.common["X-Member-Details"]=b.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(b.enc.Utf8),this.GetProductWalletFrom()},methods:{GetProductWalletFrom(){d.get("GetProductWalletDetails",{},{headers:_}).then(e=>{if(e.data.ResponseCode=="0")for(let t=0;t<e.data.ProductList.length;t++)(e.data.ProductList[t].IsMaintenance==!1||e.data.ProductList[t].IsDrop==!1)&&this.getProductBalance(e.data.ProductList[t].ProductCode,e.data.ProductList[t].IsSeamless,e.data.ProductList[t].IsMaintenance).then(a=>{this.productList.push({name:e.data.ProductList[t].ProductName+" - "+a,code:e.data.ProductList[t].ProductCode})})}).catch(e=>{console.error(e)})},onChange(e){this.productListTo=[];for(let t=0;t<this.productList.length;t++)e!=this.productList[t].code&&this.productListTo.push({name:this.productList[t].name,code:this.productList[t].code});this.productTo=""},submitTransfer(){if(this.productFrom==""||this.productTo=="")return alert("bank selected is required");d.post("Transfer",{TransferFrom:this.productFrom,TransferTo:this.productTo,TransferAmount:this.transferAmount},{headers:_}).then(e=>{e.data.ResponseCode=="0"&&alert(e.data.ResponseMessage)}).catch(e=>{console.error(e)})},async getProductBalance(e,t,i){const a=await d.post("GetBalance?productCode="+e+"&isSeamless="+t+"&isMaintenance="+i,{},{headers:_});return a.data=="9999"||a.data=="null"?"Maintanence":a.data},validateTransferAmount(e){return e?!0:"This field is required"}},components:{Header:S}},B={class:"form-01-main"},D={class:"form-cover"},k={class:"container"},I={class:"form-sub-main"},E={class:"form-group"},G={class:"form-group"},H={class:"form-group"},w={class:"form-group"},N={class:"btn_uy"};function R(e,t,i,a,r,u){const P=n("Header"),h=n("el-option"),g=n("el-select"),v=n("Field"),F=n("ErrorMessage"),C=n("Form");return c(),m(f,null,[l(P,{title:r.title,description:r.description},null,8,["title","description"]),s("section",B,[s("div",D,[s("div",k,[l(C,{onSubmit:u.submitTransfer},{default:p(()=>[s("div",I,[s("div",E,[l(g,{class:"form-control _ge_de_ol",modelValue:r.productFrom,"onUpdate:modelValue":t[0]||(t[0]=o=>r.productFrom=o),onChange:u.onChange,clearable:"",placeholder:"Please select"},{default:p(()=>[(c(!0),m(f,null,T(r.productList,(o,y)=>(c(),L(h,{label:o.name,key:o.code,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),s("div",G,[l(g,{class:"form-control _ge_de_ol",clearable:"",filterable:"",modelValue:r.productTo,"onUpdate:modelValue":t[1]||(t[1]=o=>r.productTo=o),placeholder:"Please select"},{default:p(()=>[(c(!0),m(f,null,T(r.productListTo,(o,y)=>(c(),L(h,{label:o.name,key:o.code,value:o.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),s("div",H,[l(v,{class:"form-control _ge_de_ol",name:"transferAmount",type:"text",placeholder:"Enter Transfer Amount",rules:u.validateTransferAmount,autocomplete:"off"},null,8,["rules"]),l(F,{name:"transferAmount",style:{color:"red"}})]),s("div",w,[s("div",N,[s("button",null,V(e.$t("common.submit")),1)])])])]),_:1},8,["onSubmit"])])])])],64)}const W=M(x,[["render",R]]);export{W as default};

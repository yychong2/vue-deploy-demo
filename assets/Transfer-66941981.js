import{_ as x,u as F,d,C as T,L as v,r as i,o as l,c as u,a as c,b as o,t as L,w as p,F as _,f as g,g as b,m as M}from"./index-f0d66ea3.js";const V={data(){const{t}=F();return{loadingPrice:t("common.loading"),productFrom:"",productTo:"",productList:[],productListTo:[],transferAmount:"",productPromotionList:[],product_promotion_selected:"",promotionResult:!1,loading:!1,headers:{"X-Member-Details":d.defaults.headers.common["X-Member-Details"]}}},created(){d.defaults.headers.common["X-Member-Details"]=T.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(T.enc.Utf8),this.GetProductWalletFrom()},methods:{GetProductWalletFrom(){d.get("GetProductWalletDetails",{},this.headers).then(t=>{t.data.ResponseCode=="0"&&(t.data.ProductList.forEach(e=>{(e.IsMaintenance==!1||e.IsDrop==!1)&&this.productList.push({name:e.ProductName+" - "+this.loadingPrice,product_name:e.ProductName,code:e.ProductCode,id:e.Id,IsSeamless:e.IsSeamless,IsMaintenance:e.IsMaintenance})}),this.productList.forEach(e=>{this.getProductBalance(e.code,e.IsSeamless,e.IsMaintenance).then(a=>{e.name=e.product_name+" - "+a})}))}).catch(t=>{console.error(t)})},onChange(t){this.productListTo=[];for(let e=0;e<this.productList.length;e++)t!=this.productList[e].code&&this.productListTo.push({name:this.productList[e].name,code:this.productList[e].code,id:this.productList[e].id});this.productTo=""},submitTransfer(t){if(this.productFrom==""||this.productTo=="")return alert("bank selected is required");this.loading=!0,d.post("Transfer",{TransferFrom:this.productFrom,TransferTo:this.productTo,TransferAmount:t.transferAmount,ProductPromotionId:this.product_promotion_selected},this.headers).then(e=>{e.data.ResponseCode=="0"&&alert(e.data.ResponseMessage)}).catch(e=>{console.error(e)}).finally(e=>{this.loading=!1})},async getProductBalance(t,e,r){const a=await d.post("GetBalance?productCode="+t+"&isSeamless="+e+"&isMaintenance="+r,{},this.headers);return a.data=="9999"||a.data=="null"?"Maintanence":a.data},checkPromotion(t){const e=[];this.productListTo.forEach(r=>{r.code===t&&e.push(r)}),d.post("GetProductPromoList",{ProductId:e[0].id,ProductCode:e[0].code,IsLaunchGame:!0},this.headers).then(r=>{r.data.ResponseCode=="0"&&(this.productPromotionList=[],r.data.ProductPromotionList.length>0?(this.productPromotionList.push({Title:"Please select",Id:""}),r.data.ProductPromotionList.forEach(a=>{this.productPromotionList.push({Title:a.Title,Id:a.Id})}),this.product_promotion_selected="",this.promotionResult=!0):this.promotionResult=!1)}).catch(r=>{console.error(r)})},validateTransferAmount(t){return t?!0:"This field is required"}},components:{Loading:v}},S={class:"py-5"},A={class:"container px-5"},E={class:"bg-light rounded-3 py-5 px-4 px-md-5 mb-5"},B={class:"text-center mb-5"},R=o("div",{class:"feature bg-dark bg-gradient text-white rounded-3 mb-3"},[o("i",{class:"bi bi-file-earmark-post"})],-1),D={class:"fw-bolder"},w={class:"row gx-5 justify-content-center"},G={class:"col-lg-8 col-xl-6"},N={class:"form-floating mb-3"},U={class:"form-group"},q=o("span",{style:{color:"black"}},"Transfer From",-1),W={class:"form-floating mb-3"},X={class:"form-group"},j=o("span",{style:{color:"black"}},"Transfer To",-1),J={key:0,class:"form-floating mb-3"},K={class:"form-floating mb-3"},z={class:"form-group"},H=o("span",{style:{color:"black"}},"Product Promotion",-1),O={class:"form-floating mb-3"},Q=o("label",{for:"name"},"Transfer Amount",-1),Y={class:"d-grid"},Z={class:"btn btn-dark btn-lg",id:"submitButton"};function $(t,e,r,a,n,m){const y=i("Loading"),h=i("el-option"),f=i("el-select"),I=i("Field"),C=i("ErrorMessage"),k=i("Form");return l(),u(_,null,[c(y,{loading:n.loading},null,8,["loading"]),o("section",S,[o("div",A,[o("div",E,[o("div",B,[R,o("h1",D,L(t.$t("nav.transfer")),1)]),o("div",w,[o("div",G,[c(k,{onSubmit:m.submitTransfer},{default:p(()=>[o("div",N,[o("div",U,[q,c(f,{class:"form-control2 _ge_de_ol",modelValue:n.productFrom,"onUpdate:modelValue":e[0]||(e[0]=s=>n.productFrom=s),onChange:m.onChange,clearable:"",placeholder:"Please select"},{default:p(()=>[(l(!0),u(_,null,g(n.productList,(s,P)=>(l(),b(h,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",W,[o("div",X,[j,c(f,{class:"form-control2 _ge_de_ol",clearable:"",filterable:"",modelValue:n.productTo,"onUpdate:modelValue":e[1]||(e[1]=s=>n.productTo=s),onChange:m.checkPromotion,placeholder:"Please select"},{default:p(()=>[(l(!0),u(_,null,g(n.productListTo,(s,P)=>(l(),b(h,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),n.promotionResult?(l(),u("div",J,[o("div",K,[o("div",z,[H,c(f,{class:"form-control2 _ge_de_ol",modelValue:n.product_promotion_selected,"onUpdate:modelValue":e[2]||(e[2]=s=>n.product_promotion_selected=s),placeholder:"Please select","aria-required":"true"},{default:p(()=>[(l(!0),u(_,null,g(n.productPromotionList,(s,P)=>(l(),b(h,{label:s.Title,key:s.Id,value:s.Id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])])):M("",!0),o("div",O,[c(I,{class:"form-control _ge_de_ol",name:"transferAmount",type:"text",placeholder:"Enter Transfer Amount",rules:m.validateTransferAmount,autocomplete:"off"},null,8,["rules"]),Q,c(C,{name:"transferAmount",style:{color:"red"}})]),o("div",Y,[o("button",Z,L(t.$t("common.submit")),1)])]),_:1},8,["onSubmit"])])])])])])],64)}const oe=x(V,[["render",$]]);export{oe as default};

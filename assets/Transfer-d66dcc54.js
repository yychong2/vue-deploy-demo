import{_ as v,d as o,u as A,C as r,H as C,r as u,o as i,c as m,a as p,b as n,e as P,w as _,f as D,v as M,t as U,F as h,g as b,h as L}from"./index-c700fda6.js";o.defaults.withCredentials=!0;let T={"Content-Type":"application/json",Language:"en-US","X-Member-Details":o.defaults.headers.common["X-Member-Details"],Authorization:o.defaults.headers.common.Authorization};const I={data(){return{title:"",description:"",productFrom:"",productTo:"",productList:[],productListTo:[],transferAmount:""}},created(){const{t}=A();this.title=t("title.transfer"),this.description=t("title.transfer_description"),this.GetProductWalletFrom()},methods:{GetProductWalletFrom(){o.defaults.headers.common["Content-Type"]="application/json",o.defaults.headers.common.Language="en-US",o.defaults.headers.common["X-Member-Details"]=r.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(r.enc.Utf8),o.defaults.headers.common.Authorization=sessionStorage.getItem("tokenLogin"),o.get(this.apiUrl+"GetProductWalletDetails",{},{headers:T}).then(t=>{for(let e=0;e<t.data.ProductList.length;e++)(t.data.ProductList[e].IsMaintenance==!1||t.data.ProductList[e].IsDrop==!1)&&this.getProductBalance(t.data.ProductList[e].ProductCode,t.data.ProductList[e].IsSeamless,t.data.ProductList[e].IsMaintenance).then(l=>{this.productList.push({name:t.data.ProductList[e].ProductName+" - "+l,code:t.data.ProductList[e].ProductCode})})}).catch(t=>{console.error(t)})},onChange(t){this.productListTo=[];for(let e=0;e<this.productList.length;e++)t!=this.productList[e].code&&this.productListTo.push({name:this.productList[e].name,code:this.productList[e].code});this.productTo=""},submitTransfer(){o.defaults.headers.common["Content-Type"]="application/json",o.defaults.headers.common.Language="en-US",o.defaults.headers.common["X-Member-Details"]=r.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(r.enc.Utf8),o.defaults.headers.common.Authorization=sessionStorage.getItem("tokenLogin"),o.post(this.apiUrl+"Transfer",{TransferFrom:this.productFrom,TransferTo:this.productTo,TransferAmount:this.transferAmount},{headers:T}).then(t=>{alert(t.data.ResponseMessage)}).catch(t=>{console.error(t)})},async getProductBalance(t,e,d){o.defaults.headers.common["Content-Type"]="application/json",o.defaults.headers.common.Language="en-US",o.defaults.headers.common["X-Member-Details"]=r.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(r.enc.Utf8),o.defaults.headers.common.Authorization=sessionStorage.getItem("tokenLogin");const l={"Content-Type":"application/json",Language:"en-US","X-Member-Details":o.defaults.headers.common["X-Member-Details"],Authorization:o.defaults.headers.common.Authorization},a=await o.post(this.apiUrl+"GetBalance?productCode="+t+"&isSeamless="+e+"&isMaintenance="+d,{},{headers:l});return a.data=="9999"||a.data=="null"?"Maintanence":a.data}},components:{Header:C}},k={class:"form-01-main"},F={class:"form-cover"},V={class:"container"},z={class:"form-sub-main"},B={class:"form-group"},X={class:"form-group"},j={class:"form-group"},w={class:"form-group"},x={class:"btn_uy"};function E(t,e,d,l,a,c){const S=u("Header"),f=u("el-option"),g=u("el-select");return i(),m(h,null,[p(S,{title:a.title,description:a.description},null,8,["title","description"]),n("section",k,[n("div",F,[n("div",V,[n("form",{onSubmit:e[4]||(e[4]=P((...s)=>t.submitTransferAmount&&t.submitTransferAmount(...s),["prevent"]))},[n("div",z,[n("div",B,[p(g,{class:"form-control _ge_de_ol",modelValue:a.productFrom,"onUpdate:modelValue":e[0]||(e[0]=s=>a.productFrom=s),onChange:c.onChange,clearable:"",placeholder:"Please select"},{default:_(()=>[(i(!0),m(h,null,b(a.productList,(s,y)=>(i(),L(f,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),n("div",X,[p(g,{class:"form-control _ge_de_ol",clearable:"",filterable:"",modelValue:a.productTo,"onUpdate:modelValue":e[1]||(e[1]=s=>a.productTo=s),placeholder:"Please select"},{default:_(()=>[(i(!0),m(h,null,b(a.productListTo,(s,y)=>(i(),L(f,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),n("div",j,[D(n("input",{class:"form-control _ge_de_ol","onUpdate:modelValue":e[2]||(e[2]=s=>a.transferAmount=s),type:"text",placeholder:"Enter Transfer Amount",required:""},null,512),[[M,a.transferAmount]])]),n("div",w,[n("div",x,[n("button",{type:"submit",onClick:e[3]||(e[3]=(...s)=>c.submitTransfer&&c.submitTransfer(...s))},U(t.$t("common.submit")),1)])])])],32)])])])],64)}const H=v(I,[["render",E]]);export{H as default};

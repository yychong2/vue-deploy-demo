import{_ as F,d as i,C as T,L as I,r as c,o as l,c as u,a as d,b as e,t as v,w as _,F as p,f as b,g as P,l as V}from"./index-09c2119b.js";let h={"X-Member-Details":i.defaults.headers.common["X-Member-Details"]};const A={data(){return{productFrom:"",productTo:"",productList:[],productListTo:[],transferAmount:"",productPromotionList:[],product_promotion_selected:"",promotionResult:!1,loading:!1}},created(){i.defaults.headers.common["X-Member-Details"]=T.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(T.enc.Utf8),this.GetProductWalletFrom()},methods:{GetProductWalletFrom(){i.get("GetProductWalletDetails",{},{headers:h}).then(o=>{if(o.data.ResponseCode=="0")for(let t=0;t<o.data.ProductList.length;t++)(o.data.ProductList[t].IsMaintenance==!1||o.data.ProductList[t].IsDrop==!1)&&this.getProductBalance(o.data.ProductList[t].ProductCode,o.data.ProductList[t].IsSeamless,o.data.ProductList[t].IsMaintenance).then(n=>{this.productList.push({name:o.data.ProductList[t].ProductName+" - "+n,code:o.data.ProductList[t].ProductCode,id:o.data.ProductList[t].Id})})}).catch(o=>{console.error(o)})},onChange(o){this.productListTo=[];for(let t=0;t<this.productList.length;t++)o!=this.productList[t].code&&this.productListTo.push({name:this.productList[t].name,code:this.productList[t].code,id:this.productList[t].id});this.productTo=""},submitTransfer(o){if(this.productFrom==""||this.productTo=="")return alert("bank selected is required");this.loading=!0,i.post("Transfer",{TransferFrom:this.productFrom,TransferTo:this.productTo,TransferAmount:o.transferAmount,ProductPromotionId:this.product_promotion_selected},{headers:h}).then(t=>{t.data.ResponseCode=="0"&&alert(t.data.ResponseMessage)}).catch(t=>{console.error(t)}).finally(t=>{this.loading=!1})},async getProductBalance(o,t,r){const n=await i.post("GetBalance?productCode="+o+"&isSeamless="+t+"&isMaintenance="+r,{},{headers:h});return n.data=="9999"||n.data=="null"?"Maintanence":n.data},checkPromotion(o){const t=[];this.productListTo.forEach(r=>{r.code===o&&t.push(r)}),i.post("GetProductPromoList",{ProductId:t[0].id,ProductCode:t[0].code,IsLaunchGame:!0},{headers:h}).then(r=>{r.data.ResponseCode=="0"&&(this.productPromotionList=[],r.data.ProductPromotionList.length>0?(this.productPromotionList.push({Title:"Please select",Id:""}),r.data.ProductPromotionList.forEach(n=>{this.productPromotionList.push({Title:n.Title,Id:n.Id})}),this.product_promotion_selected="",this.promotionResult=!0):this.promotionResult=!1)}).catch(r=>{console.error(r)})},validateTransferAmount(o){return o?!0:"This field is required"}},components:{Loading:I}},M={class:"py-5"},S={class:"container px-5"},B={class:"bg-light rounded-3 py-5 px-4 px-md-5 mb-5"},R={class:"text-center mb-5"},D=e("div",{class:"feature bg-dark bg-gradient text-white rounded-3 mb-3"},[e("i",{class:"bi bi-file-earmark-post"})],-1),E={class:"fw-bolder"},w={class:"row gx-5 justify-content-center"},G={class:"col-lg-8 col-xl-6"},N={class:"form-floating mb-3"},U={class:"form-group"},q=e("span",{style:{color:"black"}},"Transfer From",-1),W={class:"form-floating mb-3"},X={class:"form-group"},j=e("span",{style:{color:"black"}},"Transfer To",-1),J={key:0,class:"form-floating mb-3"},K={class:"form-floating mb-3"},z={class:"form-group"},H=e("span",{style:{color:"black"}},"Product Promotion",-1),O={class:"form-floating mb-3"},Q=e("label",{for:"name"},"Transfer Amount",-1),Y={class:"d-grid"},Z={class:"btn btn-dark btn-lg",id:"submitButton"};function $(o,t,r,n,a,m){const y=c("Loading"),f=c("el-option"),g=c("el-select"),C=c("Field"),k=c("ErrorMessage"),x=c("Form");return l(),u(p,null,[d(y,{loading:a.loading},null,8,["loading"]),e("section",M,[e("div",S,[e("div",B,[e("div",R,[D,e("h1",E,v(o.$t("nav.transfer")),1)]),e("div",w,[e("div",G,[d(x,{onSubmit:m.submitTransfer},{default:_(()=>[e("div",N,[e("div",U,[q,d(g,{class:"form-control2 _ge_de_ol",modelValue:a.productFrom,"onUpdate:modelValue":t[0]||(t[0]=s=>a.productFrom=s),onChange:m.onChange,clearable:"",placeholder:"Please select"},{default:_(()=>[(l(!0),u(p,null,b(a.productList,(s,L)=>(l(),P(f,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),e("div",W,[e("div",X,[j,d(g,{class:"form-control2 _ge_de_ol",clearable:"",filterable:"",modelValue:a.productTo,"onUpdate:modelValue":t[1]||(t[1]=s=>a.productTo=s),onChange:m.checkPromotion,placeholder:"Please select"},{default:_(()=>[(l(!0),u(p,null,b(a.productListTo,(s,L)=>(l(),P(f,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),a.promotionResult?(l(),u("div",J,[e("div",K,[e("div",z,[H,d(g,{class:"form-control2 _ge_de_ol",modelValue:a.product_promotion_selected,"onUpdate:modelValue":t[2]||(t[2]=s=>a.product_promotion_selected=s),placeholder:"Please select","aria-required":"true"},{default:_(()=>[(l(!0),u(p,null,b(a.productPromotionList,(s,L)=>(l(),P(f,{label:s.Title,key:s.Id,value:s.Id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])])):V("",!0),e("div",O,[d(C,{class:"form-control _ge_de_ol",name:"transferAmount",type:"text",placeholder:"Enter Transfer Amount",rules:m.validateTransferAmount,autocomplete:"off"},null,8,["rules"]),Q,d(k,{name:"transferAmount",style:{color:"red"}})]),e("div",Y,[e("button",Z,v(o.$t("common.submit")),1)])]),_:1},8,["onSubmit"])])])])])])],64)}const ot=F(A,[["render",$]]);export{ot as default};

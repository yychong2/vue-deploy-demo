import{_ as F,d as i,u as v,C as L,L as M,r as d,o as l,c as u,a as c,b as o,t as y,w as p,F as _,f as b,g as P,l as V}from"./index-ec246616.js";let h={"X-Member-Details":i.defaults.headers.common["X-Member-Details"]};const S={data(){const{t}=v();return{loadingPrice:t("common.loading"),productFrom:"",productTo:"",productList:[],productListTo:[],transferAmount:"",productPromotionList:[],product_promotion_selected:"",promotionResult:!1,loading:!1}},created(){i.defaults.headers.common["X-Member-Details"]=L.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(L.enc.Utf8),this.GetProductWalletFrom()},methods:{GetProductWalletFrom(){i.get("GetProductWalletDetails",{},{headers:h}).then(t=>{t.data.ResponseCode=="0"&&(t.data.ProductList.forEach(e=>{(e.IsMaintenance==!1||e.IsDrop==!1)&&this.productList.push({name:e.ProductName+" - "+this.loadingPrice,product_name:e.ProductName,code:e.ProductCode,id:e.Id,IsSeamless:e.IsSeamless,IsMaintenance:e.IsMaintenance})}),this.productList.forEach(e=>{this.getProductBalance(e.code,e.IsSeamless,e.IsMaintenance).then(a=>{e.name=e.product_name+" - "+a})}))}).catch(t=>{console.error(t)})},onChange(t){this.productListTo=[];for(let e=0;e<this.productList.length;e++)t!=this.productList[e].code&&this.productListTo.push({name:this.productList[e].name,code:this.productList[e].code,id:this.productList[e].id});this.productTo=""},submitTransfer(t){if(this.productFrom==""||this.productTo=="")return alert("bank selected is required");this.loading=!0,i.post("Transfer",{TransferFrom:this.productFrom,TransferTo:this.productTo,TransferAmount:t.transferAmount,ProductPromotionId:this.product_promotion_selected},{headers:h}).then(e=>{e.data.ResponseCode=="0"&&alert(e.data.ResponseMessage)}).catch(e=>{console.error(e)}).finally(e=>{this.loading=!1})},async getProductBalance(t,e,r){const a=await i.post("GetBalance?productCode="+t+"&isSeamless="+e+"&isMaintenance="+r,{},{headers:h});return a.data=="9999"||a.data=="null"?"Maintanence":a.data},checkPromotion(t){const e=[];this.productListTo.forEach(r=>{r.code===t&&e.push(r)}),i.post("GetProductPromoList",{ProductId:e[0].id,ProductCode:e[0].code,IsLaunchGame:!0},{headers:h}).then(r=>{r.data.ResponseCode=="0"&&(this.productPromotionList=[],r.data.ProductPromotionList.length>0?(this.productPromotionList.push({Title:"Please select",Id:""}),r.data.ProductPromotionList.forEach(a=>{this.productPromotionList.push({Title:a.Title,Id:a.Id})}),this.product_promotion_selected="",this.promotionResult=!0):this.promotionResult=!1)}).catch(r=>{console.error(r)})},validateTransferAmount(t){return t?!0:"This field is required"}},components:{Loading:M}},A={class:"py-5"},E={class:"container px-5"},B={class:"bg-light rounded-3 py-5 px-4 px-md-5 mb-5"},R={class:"text-center mb-5"},D=o("div",{class:"feature bg-dark bg-gradient text-white rounded-3 mb-3"},[o("i",{class:"bi bi-file-earmark-post"})],-1),w={class:"fw-bolder"},G={class:"row gx-5 justify-content-center"},N={class:"col-lg-8 col-xl-6"},U={class:"form-floating mb-3"},q={class:"form-group"},W=o("span",{style:{color:"black"}},"Transfer From",-1),X={class:"form-floating mb-3"},j={class:"form-group"},J=o("span",{style:{color:"black"}},"Transfer To",-1),K={key:0,class:"form-floating mb-3"},z={class:"form-floating mb-3"},H={class:"form-group"},O=o("span",{style:{color:"black"}},"Product Promotion",-1),Q={class:"form-floating mb-3"},Y=o("label",{for:"name"},"Transfer Amount",-1),Z={class:"d-grid"},$={class:"btn btn-dark btn-lg",id:"submitButton"};function ee(t,e,r,a,n,m){const I=d("Loading"),f=d("el-option"),g=d("el-select"),C=d("Field"),k=d("ErrorMessage"),x=d("Form");return l(),u(_,null,[c(I,{loading:n.loading},null,8,["loading"]),o("section",A,[o("div",E,[o("div",B,[o("div",R,[D,o("h1",w,y(t.$t("nav.transfer")),1)]),o("div",G,[o("div",N,[c(x,{onSubmit:m.submitTransfer},{default:p(()=>[o("div",U,[o("div",q,[W,c(g,{class:"form-control2 _ge_de_ol",modelValue:n.productFrom,"onUpdate:modelValue":e[0]||(e[0]=s=>n.productFrom=s),onChange:m.onChange,clearable:"",placeholder:"Please select"},{default:p(()=>[(l(!0),u(_,null,b(n.productList,(s,T)=>(l(),P(f,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",X,[o("div",j,[J,c(g,{class:"form-control2 _ge_de_ol",clearable:"",filterable:"",modelValue:n.productTo,"onUpdate:modelValue":e[1]||(e[1]=s=>n.productTo=s),onChange:m.checkPromotion,placeholder:"Please select"},{default:p(()=>[(l(!0),u(_,null,b(n.productListTo,(s,T)=>(l(),P(f,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),n.promotionResult?(l(),u("div",K,[o("div",z,[o("div",H,[O,c(g,{class:"form-control2 _ge_de_ol",modelValue:n.product_promotion_selected,"onUpdate:modelValue":e[2]||(e[2]=s=>n.product_promotion_selected=s),placeholder:"Please select","aria-required":"true"},{default:p(()=>[(l(!0),u(_,null,b(n.productPromotionList,(s,T)=>(l(),P(f,{label:s.Title,key:s.Id,value:s.Id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])])):V("",!0),o("div",Q,[c(C,{class:"form-control _ge_de_ol",name:"transferAmount",type:"text",placeholder:"Enter Transfer Amount",rules:m.validateTransferAmount,autocomplete:"off"},null,8,["rules"]),Y,c(k,{name:"transferAmount",style:{color:"red"}})]),o("div",Z,[o("button",$,y(t.$t("common.submit")),1)])]),_:1},8,["onSubmit"])])])])])])],64)}const te=F(S,[["render",ee]]);export{te as default};

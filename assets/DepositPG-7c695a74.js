import{_ as v,d as c,u as I,C as g,H as y,r as d,o as l,c as r,a as i,b as o,w as u,F as _,f as k,g as f,l as A,t as V}from"./index-c5f78fe8.js";let b={"X-Member-Details":c.defaults.headers.common["X-Member-Details"]};const S={data(){return{title:"",description:"",operatorBankAccountList:{},bankCodeList:[],promotionList:[],bank_selected:"",promotion_selected:"",bank_code_selected:"",bankCodeResult:!1}},created(){const{t:n}=I();this.title=n("title.deposit"),this.description=n("title.deposit_description"),c.defaults.headers.common["X-Member-Details"]=g.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(g.enc.Utf8),this.GetDepositDetails()},methods:{GetDepositDetails:function(n){c.get("GetPGDepositDetails",{},{headers:b}).then(e=>{e.data.ResponseCode=="0"&&(this.operatorBankAccountList=e.data.OperatorBankAccountList,e.data.PromotionList.length>0&&(this.promotionList.push({Title:"Please select",Id:""}),e.data.PromotionList.forEach(s=>{this.promotionList.push({Title:s.Title,Id:s.Id})})))}).catch(e=>{console.error(e)})},GetBankCodeDetails(n){const e=[];this.operatorBankAccountList.forEach(s=>{s.BankId===n&&e.push(s)}),c.post("GetPgBankDetails",{DepositBankId:n,DepositBankCode:e[0].BankCode,DepositAmount:"",ProductId:"",ProductCode:"",ProductPromotionId:"",PromotionId:"",PromotionCode:"",SwiftCode:e[0].SwiftCode},{headers:b}).then(s=>{this.bankCodeList=[],s.data.ResponseCode=="0"&&(s.data.PgDetail.BankList!=null?s.data.PgDetail.BankList.length>0?(console.log(s.data),this.bankCodeList=s.data.PgDetail.BankList,console.log(this.bankCodeList),this.bankCodeResult=!0):(this.bankCodeList="",this.bankCodeResult=!1):(this.bankCodeList="",this.bankCodeResult=!1))}).catch(s=>{console.error(s)})},onSubmit(n){this.product_selected,c.post("PgDeposit",{DepositBankId:this.bank_selected,DepositBankCode:"",DepositAmount:n.amount_deposit,ProductId:"",ProductCode:"",ProductPromotionId:"",PromotionId:this.promotion_selected,PromotionCode:""},{headers:b}).then(e=>{console.log(e.data),e.data.ResponseCode=="0"&&(alert(e.data.ResponseMessage),window.open(e.data.ResponseData))}).catch(e=>{console.error(e)})},validateDepositAmount(n){return n?!0:"This field is required"}},components:{Header:y}},R={class:"form-01-main"},x={class:"form-cover"},G={class:"container"},E={class:"form-sub-main"},w={class:"form-group"},F=o("span",null,"Bank Name",-1),M={key:0},N={class:"form-group"},T=o("span",null,"Bank Options",-1),q={class:"form-group"},H=o("span",null,"Promotion",-1),U={class:"form-group"},X=o("span",null,"Deposit Amount",-1),O={class:"form-group"},J={class:"btn_uy"};function K(n,e,s,j,a,m){const D=d("Header"),p=d("el-option"),h=d("el-select"),P=d("Field"),B=d("ErrorMessage"),L=d("Form");return l(),r(_,null,[i(D,{title:a.title,description:a.description},null,8,["title","description"]),o("section",R,[o("div",x,[o("div",G,[i(L,{onSubmit:m.onSubmit},{default:u(()=>[o("div",E,[o("div",w,[F,i(h,{class:"form-control2 _ge_de_ol",modelValue:a.bank_selected,"onUpdate:modelValue":e[0]||(e[0]=t=>a.bank_selected=t),onChange:m.GetBankCodeDetails,placeholder:"Please select","aria-required":"true"},{default:u(()=>[(l(!0),r(_,null,k(a.operatorBankAccountList,(t,C)=>(l(),f(p,{label:t.BankName,key:t.BankId,value:t.BankId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),a.bankCodeResult?(l(),r("div",M,[o("div",N,[T,i(h,{class:"form-control2 _ge_de_ol",modelValue:a.bank_code_selected,"onUpdate:modelValue":e[1]||(e[1]=t=>a.bank_code_selected=t),placeholder:"Please select","aria-required":"true"},{default:u(()=>[(l(!0),r(_,null,k(a.bankCodeList,(t,C)=>(l(),f(p,{label:t.Name,key:t.Code,value:t.Code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):A("",!0),o("div",q,[H,i(h,{class:"form-control2 _ge_de_ol",modelValue:a.promotion_selected,"onUpdate:modelValue":e[2]||(e[2]=t=>a.promotion_selected=t),placeholder:"Please select","aria-required":"true"},{default:u(()=>[(l(!0),r(_,null,k(a.promotionList,(t,C)=>(l(),f(p,{label:t.Title,key:t.Id,value:t.Id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),o("div",U,[X,i(P,{class:"form-control2 _ge_de_ol",name:"amount_deposit",type:"text",inputmode:"numeric",pattern:"/d+",placeholder:"Enter Deposit Amount",rules:m.validateDepositAmount,autocomplete:"off"},null,8,["rules"]),i(B,{name:"amount_deposit",style:{color:"red"}})]),o("div",O,[o("div",J,[o("button",null,V(n.$t("common.submit")),1)])])])]),_:1},8,["onSubmit"])])])])],64)}const Q=v(S,[["render",K]]);export{Q as default};

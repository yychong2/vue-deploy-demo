import{_ as x,d as c,C as T,r as i,o as l,c as u,b as o,t as v,a as d,w as _,F as b,g,e as P,l as F}from"./index-d3edd26f.js";let p={"X-Member-Details":c.defaults.headers.common["X-Member-Details"]};const I={data(){return{productFrom:"",productTo:"",productList:[],productListTo:[],transferAmount:"",productPromotionList:[],product_promotion_selected:"",promotionResult:!1}},created(){c.defaults.headers.common["X-Member-Details"]=T.AES.decrypt(sessionStorage.getItem("memDetail"),this.aesKey).toString(T.enc.Utf8),this.GetProductWalletFrom()},methods:{GetProductWalletFrom(){c.get("GetProductWalletDetails",{},{headers:p}).then(e=>{if(e.data.ResponseCode=="0")for(let t=0;t<e.data.ProductList.length;t++)(e.data.ProductList[t].IsMaintenance==!1||e.data.ProductList[t].IsDrop==!1)&&this.getProductBalance(e.data.ProductList[t].ProductCode,e.data.ProductList[t].IsSeamless,e.data.ProductList[t].IsMaintenance).then(n=>{this.productList.push({name:e.data.ProductList[t].ProductName+" - "+n,code:e.data.ProductList[t].ProductCode,id:e.data.ProductList[t].Id})})}).catch(e=>{console.error(e)})},onChange(e){this.productListTo=[];for(let t=0;t<this.productList.length;t++)e!=this.productList[t].code&&this.productListTo.push({name:this.productList[t].name,code:this.productList[t].code,id:this.productList[t].id});this.productTo=""},submitTransfer(e){if(this.productFrom==""||this.productTo=="")return alert("bank selected is required");c.post("Transfer",{TransferFrom:this.productFrom,TransferTo:this.productTo,TransferAmount:e.transferAmount,ProductPromotionId:this.product_promotion_selected},{headers:p}).then(t=>{t.data.ResponseCode=="0"&&alert(t.data.ResponseMessage)}).catch(t=>{console.error(t)})},async getProductBalance(e,t,r){const n=await c.post("GetBalance?productCode="+e+"&isSeamless="+t+"&isMaintenance="+r,{},{headers:p});return n.data=="9999"||n.data=="null"?"Maintanence":n.data},checkPromotion(e){const t=[];this.productListTo.forEach(r=>{r.code===e&&t.push(r)}),c.post("GetProductPromoList",{ProductId:t[0].id,ProductCode:t[0].code,IsLaunchGame:!0},{headers:p}).then(r=>{r.data.ResponseCode=="0"&&(this.productPromotionList=[],r.data.ProductPromotionList.length>0?(this.productPromotionList.push({Title:"Please select",Id:""}),r.data.ProductPromotionList.forEach(n=>{this.productPromotionList.push({Title:n.Title,Id:n.Id})}),this.product_promotion_selected="",this.promotionResult=!0):this.promotionResult=!1)}).catch(r=>{console.error(r)})},validateTransferAmount(e){return e?!0:"This field is required"}},components:{}},V={class:"py-5"},A={class:"container px-5"},M={class:"bg-light rounded-3 py-5 px-4 px-md-5 mb-5"},S={class:"text-center mb-5"},B=o("div",{class:"feature bg-dark bg-gradient text-white rounded-3 mb-3"},[o("i",{class:"bi bi-file-earmark-post"})],-1),R={class:"fw-bolder"},D={class:"row gx-5 justify-content-center"},E={class:"col-lg-8 col-xl-6"},w={class:"form-floating mb-3"},G={class:"form-group"},N=o("span",{style:{color:"black"}},"Transfer From",-1),U={class:"form-floating mb-3"},q={class:"form-group"},W=o("span",{style:{color:"black"}},"Transfer To",-1),X={key:0,class:"form-floating mb-3"},j={class:"form-floating mb-3"},J={class:"form-group"},K=o("span",{style:{color:"black"}},"Product Promotion",-1),z={class:"form-floating mb-3"},H=o("label",{for:"name"},"Transfer Amount",-1),O={class:"d-grid"},Q={class:"btn btn-dark btn-lg",id:"submitButton"};function Y(e,t,r,n,a,m){const h=i("el-option"),f=i("el-select"),y=i("Field"),C=i("ErrorMessage"),k=i("Form");return l(),u("section",V,[o("div",A,[o("div",M,[o("div",S,[B,o("h1",R,v(e.$t("nav.transfer")),1)]),o("div",D,[o("div",E,[d(k,{onSubmit:m.submitTransfer},{default:_(()=>[o("div",w,[o("div",G,[N,d(f,{class:"form-control2 _ge_de_ol",modelValue:a.productFrom,"onUpdate:modelValue":t[0]||(t[0]=s=>a.productFrom=s),onChange:m.onChange,clearable:"",placeholder:"Please select"},{default:_(()=>[(l(!0),u(b,null,g(a.productList,(s,L)=>(l(),P(h,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),o("div",U,[o("div",q,[W,d(f,{class:"form-control2 _ge_de_ol",clearable:"",filterable:"",modelValue:a.productTo,"onUpdate:modelValue":t[1]||(t[1]=s=>a.productTo=s),onChange:m.checkPromotion,placeholder:"Please select"},{default:_(()=>[(l(!0),u(b,null,g(a.productListTo,(s,L)=>(l(),P(h,{label:s.name,key:s.code,value:s.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])])]),a.promotionResult?(l(),u("div",X,[o("div",j,[o("div",J,[K,d(f,{class:"form-control2 _ge_de_ol",modelValue:a.product_promotion_selected,"onUpdate:modelValue":t[2]||(t[2]=s=>a.product_promotion_selected=s),placeholder:"Please select","aria-required":"true"},{default:_(()=>[(l(!0),u(b,null,g(a.productPromotionList,(s,L)=>(l(),P(h,{label:s.Title,key:s.Id,value:s.Id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])])):F("",!0),o("div",z,[d(y,{class:"form-control _ge_de_ol",name:"transferAmount",type:"text",placeholder:"Enter Transfer Amount",rules:m.validateTransferAmount,autocomplete:"off"},null,8,["rules"]),H,d(C,{name:"transferAmount",style:{color:"red"}})]),o("div",O,[o("button",Q,v(e.$t("common.submit")),1)])]),_:1},8,["onSubmit"])])])])])])}const $=x(I,[["render",Y]]);export{$ as default};
